{"ast":null,"code":"import _regeneratorRuntime from \"/home/yellowwoods/Documents/alterhop/frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/yellowwoods/Documents/alterhop/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/yellowwoods/Documents/alterhop/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/yellowwoods/Documents/alterhop/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/yellowwoods/Documents/alterhop/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/yellowwoods/Documents/alterhop/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/yellowwoods/Documents/alterhop/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/yellowwoods/Documents/alterhop/frontend/src/containers/Signup/index.js\";\nimport React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport { showToast } from '../ToastMessage';\nimport { postSignup, clearSignupError } from './action';\nimport SignupForm from '../../components/SignupForm';\n\nvar Signup =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Signup, _Component);\n\n  function Signup() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Signup)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.timer = null;\n    _this.state = {\n      loading: false,\n      proftype: ''\n    };\n\n    _this.submit =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(values) {\n        var pushTo, pathname, _this$props, _this$props$signupRed, err, message, clearSignupError;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.setState({\n                  loading: true\n                });\n\n                pushTo = '';\n                pathname = _this.props.location.pathname;\n\n                if (!pathname.split('/').includes('student')) {\n                  _context.next = 7;\n                  break;\n                }\n\n                _context.next = 6;\n                return _this.props.postSignup(values, 'https://api.alterhop.com/api/v1/user/signup');\n\n              case 6:\n                pushTo = 'student';\n\n              case 7:\n                if (!pathname.split('/').includes('company')) {\n                  _context.next = 11;\n                  break;\n                }\n\n                _context.next = 10;\n                return _this.props.postSignup(values, 'https://api.alterhop.com/api/v1/company/signup');\n\n              case 10:\n                pushTo = 'company';\n\n              case 11:\n                _this.setState({\n                  loading: false\n                });\n\n                _this$props = _this.props, _this$props$signupRed = _this$props.signupReducer, err = _this$props$signupRed.err, message = _this$props$signupRed.message, clearSignupError = _this$props.clearSignupError;\n\n                if (!err) {\n                  _context.next = 15;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", showToast(err, clearSignupError, true));\n\n              case 15:\n                if (message) {\n                  showToast(message, clearSignupError);\n                  _this.timer = setTimeout(function () {\n                    _this.props.history.push(\"/login/\".concat(pushTo));\n                  }, 1000);\n                }\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    return _this;\n  }\n\n  _createClass(Signup, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var pathname = this.props.location.pathname;\n\n      if (pathname.split('/').includes('student')) {\n        this.setState({\n          proftype: 'student'\n        });\n      }\n\n      if (pathname.split('/').includes('company')) {\n        this.setState({\n          proftype: 'company'\n        });\n      }\n\n      if (this.props.loginReducer.loggedIn && this.props.loginReducer.token.split(' ')[0] === 'Bearer') {\n        this.props.history.push('/');\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearTimeout(this.timer);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var loading = this.state.loading;\n      return React.createElement(SignupForm, {\n        onSubmit: this.submit,\n        loading: loading,\n        proftype: this.state.proftype,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Signup;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    loginReducer: state.loginReducer,\n    signupReducer: state.signupReducer\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    postSignup: postSignup,\n    clearSignupError: clearSignupError\n  }, dispatch);\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Signup));","map":{"version":3,"sources":["/home/yellowwoods/Documents/alterhop/frontend/src/containers/Signup/index.js"],"names":["React","Component","bindActionCreators","connect","withRouter","showToast","postSignup","clearSignupError","SignupForm","Signup","timer","state","loading","proftype","submit","values","setState","pushTo","pathname","props","location","split","includes","signupReducer","err","message","setTimeout","history","push","loginReducer","loggedIn","token","clearTimeout","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\n\nimport { showToast } from '../ToastMessage'\nimport { postSignup, clearSignupError } from './action'\nimport SignupForm from '../../components/SignupForm'\n\nclass Signup extends Component {\n\ttimer = null\n\tstate = {\n\t\tloading: false,\n\t\tproftype: ''\n\t}\n\n\tcomponentWillMount() {\n\t\tconst {\n\t\t\tlocation: { pathname }\n\t\t} = this.props\n\t\tif (pathname.split('/').includes('student')) {\n\t\t\tthis.setState({\n\t\t\t\tproftype: 'student'\n\t\t\t})\n\t\t}\n\t\tif (pathname.split('/').includes('company')) {\n\t\t\tthis.setState({\n\t\t\t\tproftype: 'company'\n\t\t\t})\n\t\t}\n\t\tif (this.props.loginReducer.loggedIn && this.props.loginReducer.token.split(' ')[0] === 'Bearer') {\n\t\t\tthis.props.history.push('/')\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout(this.timer)\n\t}\n\n\tsubmit = async (values) => {\n\t\tthis.setState({ loading: true })\n\t\tlet pushTo = ''\n\t\tconst {\n\t\t\tlocation: { pathname }\n\t\t} = this.props\n\t\tif (pathname.split('/').includes('student')) {\n\t\t\t// student signup\n\t\t\tawait this.props.postSignup(values, 'https://api.alterhop.com/api/v1/user/signup')\n\t\t\tpushTo = 'student'\n\t\t}\n\t\tif (pathname.split('/').includes('company')) {\n\t\t\t// student login\n\t\t\tawait this.props.postSignup(values, 'https://api.alterhop.com/api/v1/company/signup')\n\t\t\tpushTo = 'company'\n\t\t}\n\t\tthis.setState({ loading: false })\n\t\tconst {\n\t\t\tsignupReducer: { err, message },\n\t\t\tclearSignupError\n\t\t} = this.props\n\t\tif (err) {\n\t\t\treturn showToast(err, clearSignupError, true)\n\t\t}\n\t\tif (message) {\n\t\t\tshowToast(message, clearSignupError)\n\t\t\tthis.timer = setTimeout(() => {\n\t\t\t\tthis.props.history.push(`/login/${pushTo}`)\n\t\t\t}, 1000)\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { loading } = this.state\n\t\treturn <SignupForm onSubmit={this.submit} loading={loading} proftype={this.state.proftype} />\n\t}\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tloginReducer: state.loginReducer,\n\t\tsignupReducer: state.signupReducer\n\t}\n}\nconst mapDispatchToProps = (dispatch) => {\n\treturn bindActionCreators({ postSignup, clearSignupError }, dispatch)\n}\nexport default withRouter(\n\tconnect(\n\t\tmapStateToProps,\n\t\tmapDispatchToProps\n\t)(Signup)\n)\n"]},"metadata":{},"sourceType":"module"}